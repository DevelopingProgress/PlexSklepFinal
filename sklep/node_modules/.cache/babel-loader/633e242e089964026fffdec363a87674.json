{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{useDispatch,useSelector}from\"react-redux\";import{useEffect}from\"react\";import{deleteOrder,listOrders,orderDelete}from\"../actions/orderActions\";import{SecondaryNavbar}from\"../components/Navbar/secondaryNavbar\";import LoadingBoxWhite from\"../components/LoadingBoxWhite\";import MessageBox from\"../components/MessageBox\";import{deleteProduct}from\"../actions/productActions\";import{ORDER_DELETE_RESET}from\"../constants/orderConstants\";export default function OrderListPage(props){var orderList=useSelector(function(state){return state.orderList;});var loading=orderList.loading,error=orderList.error,orders=orderList.orders;var deleteOrder=useSelector(function(state){return state.deleteOrder;});var loadingDelete=deleteOrder.loading,errorDelete=deleteOrder.error,successDelete=deleteOrder.success;var dispatch=useDispatch();useEffect(function(){dispatch({type:ORDER_DELETE_RESET});dispatch(listOrders());},[dispatch,successDelete]);function deleteHandler(order){if(window.confirm(\"Jeste\\u015B pawny/a, \\u017Ce chcesz usun\\u0105\\u0107 zam\\xF3wienie numer \".concat(order._id,\"?\"))){dispatch(orderDelete(order._id));}}return/*#__PURE__*/_jsxs(\"div\",{className:\"grid-container\",children:[/*#__PURE__*/_jsx(SecondaryNavbar,{}),/*#__PURE__*/_jsx(\"h1\",{style:{margin:'10px'},children:\"Zam\\xF3wienia\"}),loadingDelete&&/*#__PURE__*/_jsx(LoadingBoxWhite,{}),errorDelete&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorDelete}),/*#__PURE__*/_jsx(\"div\",{children:loading?/*#__PURE__*/_jsx(LoadingBoxWhite,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"NUMER\"}),/*#__PURE__*/_jsx(\"th\",{children:\"EMAIL\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DATA\"}),/*#__PURE__*/_jsx(\"th\",{children:\"KWOTA\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ZAP\\u0141ACONE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DOSTARCZONE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"AKCJE\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(function(order){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:order._id}),/*#__PURE__*/_jsx(\"td\",{children:order.user.email}),/*#__PURE__*/_jsx(\"td\",{children:order.createdAt.substring(0,10)}),/*#__PURE__*/_jsxs(\"td\",{children:[order.totalPrice.toFixed(2),\" z\\u0142\"]}),/*#__PURE__*/_jsx(\"td\",{children:order.isPaid?order.paidAt.substring(0,10):'Nieopłacone'}),/*#__PURE__*/_jsx(\"td\",{children:order.isDelivered?order.deliveredAt.substring(0,10):'Niedostarczone'}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){props.history.push(\"/order/\".concat(order._id));},children:\"Szczeg\\xF3\\u0142y\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"small\",onClick:function onClick(){return deleteHandler(order);},children:\"Usu\\u0144\"})]})]},order._id);})})]})})]});}","map":{"version":3,"sources":["C:/Users/kacpi/OneDrive/Pulpit/PlexSklepFinal/PlexSklepFinal/sklep/src/pages/orderlist.js"],"names":["useDispatch","useSelector","useEffect","deleteOrder","listOrders","orderDelete","SecondaryNavbar","LoadingBoxWhite","MessageBox","deleteProduct","ORDER_DELETE_RESET","OrderListPage","props","orderList","state","loading","error","orders","loadingDelete","errorDelete","successDelete","success","dispatch","type","deleteHandler","order","window","confirm","_id","margin","map","user","email","createdAt","substring","totalPrice","toFixed","isPaid","paidAt","isDelivered","deliveredAt","history","push"],"mappings":"wFAAA,OAAQA,WAAR,CAAqBC,WAArB,KAAuC,aAAvC,CACA,OAAQC,SAAR,KAAwB,OAAxB,CACA,OAAQC,WAAR,CAAqBC,UAArB,CAAiCC,WAAjC,KAAmD,yBAAnD,CACA,OAAQC,eAAR,KAA8B,sCAA9B,CACA,MAAOC,CAAAA,eAAP,KAA4B,+BAA5B,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,OAAQC,aAAR,KAA4B,2BAA5B,CACA,OAAQC,kBAAR,KAAiC,6BAAjC,CAEA,cAAe,SAASC,CAAAA,aAAT,CAAuBC,KAAvB,CAA8B,CAEzC,GAAMC,CAAAA,SAAS,CAAGZ,WAAW,CAAC,SAAAa,KAAK,QAAIA,CAAAA,KAAK,CAACD,SAAV,EAAN,CAA7B,CAFyC,GAGlCE,CAAAA,OAHkC,CAGRF,SAHQ,CAGlCE,OAHkC,CAGzBC,KAHyB,CAGRH,SAHQ,CAGzBG,KAHyB,CAGlBC,MAHkB,CAGRJ,SAHQ,CAGlBI,MAHkB,CAIzC,GAAMd,CAAAA,WAAW,CAAGF,WAAW,CAAC,SAAAa,KAAK,QAAIA,CAAAA,KAAK,CAACX,WAAV,EAAN,CAA/B,CAJyC,GAKzBe,CAAAA,aALyB,CAKoCf,WALpC,CAKlCY,OALkC,CAKHI,WALG,CAKoChB,WALpC,CAKVa,KALU,CAKmBI,aALnB,CAKoCjB,WALpC,CAKUkB,OALV,CAMzC,GAAMC,CAAAA,QAAQ,CAAGtB,WAAW,EAA5B,CAEAE,SAAS,CAAC,UAAM,CACZoB,QAAQ,CAAC,CAACC,IAAI,CAAEb,kBAAP,CAAD,CAAR,CACAY,QAAQ,CAAClB,UAAU,EAAX,CAAR,CACH,CAHQ,CAGN,CAACkB,QAAD,CAAWF,aAAX,CAHM,CAAT,CAKA,QAASI,CAAAA,aAAT,CAAuBC,KAAvB,CAA8B,CAC1B,GAAGC,MAAM,CAACC,OAAP,oFAAoEF,KAAK,CAACG,GAA1E,MAAH,CAAqF,CACjFN,QAAQ,CAACjB,WAAW,CAACoB,KAAK,CAACG,GAAP,CAAZ,CAAR,CACH,CACJ,CAED,mBACI,aAAK,SAAS,CAAC,gBAAf,wBACI,KAAC,eAAD,IADJ,cAEI,WAAI,KAAK,CAAE,CAACC,MAAM,CAAE,MAAT,CAAX,2BAFJ,CAGKX,aAAa,eAAI,KAAC,eAAD,IAHtB,CAIKC,WAAW,eAAI,KAAC,UAAD,EAAY,OAAO,CAAC,QAApB,UAA8BA,WAA9B,EAJpB,cAKI,qBACKJ,OAAO,cAAI,KAAC,eAAD,IAAJ,CAA0BC,KAAK,cAAI,KAAC,UAAD,EAAY,OAAO,CAAC,QAApB,UAA8BA,KAA9B,EAAJ,cACnC,eAAO,SAAS,CAAC,OAAjB,wBACI,oCACA,mCACI,6BADJ,cAEI,6BAFJ,cAGI,4BAHJ,cAII,6BAJJ,cAKI,sCALJ,cAMI,mCANJ,cAOI,6BAPJ,GADA,EADJ,cAYI,uBACCC,MAAM,CAACa,GAAP,CAAW,SAAAL,KAAK,qBACb,mCACI,oBAAKA,KAAK,CAACG,GAAX,EADJ,cAEI,oBAAKH,KAAK,CAACM,IAAN,CAAWC,KAAhB,EAFJ,cAGI,oBAAKP,KAAK,CAACQ,SAAN,CAAgBC,SAAhB,CAA0B,CAA1B,CAA6B,EAA7B,CAAL,EAHJ,cAII,sBAAKT,KAAK,CAACU,UAAN,CAAiBC,OAAjB,CAAyB,CAAzB,CAAL,cAJJ,cAKI,oBAAKX,KAAK,CAACY,MAAN,CAAeZ,KAAK,CAACa,MAAN,CAAaJ,SAAb,CAAuB,CAAvB,CAA0B,EAA1B,CAAf,CAA+C,aAApD,EALJ,cAMI,oBAAKT,KAAK,CAACc,WAAN,CAAoBd,KAAK,CAACe,WAAN,CAAkBN,SAAlB,CAA4B,CAA5B,CAA+B,EAA/B,CAApB,CAAyD,gBAA9D,EANJ,cAOI,mCACI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,OAAhC,CAAwC,OAAO,CAAE,kBAAM,CAACtB,KAAK,CAAC6B,OAAN,CAAcC,IAAd,kBAA6BjB,KAAK,CAACG,GAAnC,GAA2C,CAAnG,+BADJ,cAEI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,OAAhC,CAAwC,OAAO,CAAE,yBAAMJ,CAAAA,aAAa,CAACC,KAAD,CAAnB,EAAjD,uBAFJ,GAPJ,GAASA,KAAK,CAACG,GAAf,CADa,EAAhB,CADD,EAZJ,GAFR,EALJ,GADJ,CAyCH","sourcesContent":["import {useDispatch, useSelector} from \"react-redux\";\r\nimport {useEffect} from \"react\";\r\nimport {deleteOrder, listOrders, orderDelete} from \"../actions/orderActions\";\r\nimport {SecondaryNavbar} from \"../components/Navbar/secondaryNavbar\";\r\nimport LoadingBoxWhite from \"../components/LoadingBoxWhite\";\r\nimport MessageBox from \"../components/MessageBox\";\r\nimport {deleteProduct} from \"../actions/productActions\";\r\nimport {ORDER_DELETE_RESET} from \"../constants/orderConstants\";\r\n\r\nexport default function OrderListPage(props) {\r\n\r\n    const orderList = useSelector(state => state.orderList);\r\n    const {loading, error, orders} = orderList;\r\n    const deleteOrder = useSelector(state => state.deleteOrder);\r\n    const {loading: loadingDelete, error: errorDelete, success: successDelete} = deleteOrder;\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        dispatch({type: ORDER_DELETE_RESET});\r\n        dispatch(listOrders());\r\n    }, [dispatch, successDelete]);\r\n\r\n    function deleteHandler(order) {\r\n        if(window.confirm(`Jesteś pawny/a, że chcesz usunąć zamówienie numer ${order._id}?`)){\r\n            dispatch(orderDelete(order._id));\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"grid-container\">\r\n            <SecondaryNavbar/>\r\n            <h1 style={{margin: '10px'}}>Zamówienia</h1>\r\n            {loadingDelete && <LoadingBoxWhite/>}\r\n            {errorDelete && <MessageBox variant=\"danger\">{errorDelete}</MessageBox>}\r\n            <div>\r\n                {loading ? (<LoadingBoxWhite/>) : error ? (<MessageBox variant=\"danger\">{error}</MessageBox>) : (\r\n                    <table className=\"table\">\r\n                        <thead>\r\n                        <tr>\r\n                            <th>NUMER</th>\r\n                            <th>EMAIL</th>\r\n                            <th>DATA</th>\r\n                            <th>KWOTA</th>\r\n                            <th>ZAPŁACONE</th>\r\n                            <th>DOSTARCZONE</th>\r\n                            <th>AKCJE</th>\r\n                        </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                        {orders.map(order => (\r\n                            <tr key={order._id}>\r\n                                <td>{order._id}</td>\r\n                                <td>{order.user.email}</td>\r\n                                <td>{order.createdAt.substring(0, 10)}</td>\r\n                                <td>{order.totalPrice.toFixed(2)} zł</td>\r\n                                <td>{order.isPaid ? order.paidAt.substring(0, 10) : 'Nieopłacone'}</td>\r\n                                <td>{order.isDelivered ? order.deliveredAt.substring(0, 10) : 'Niedostarczone'}</td>\r\n                                <td>\r\n                                    <button type=\"button\" className=\"small\" onClick={() => {props.history.push(`/order/${order._id}`);}}>Szczegóły</button>\r\n                                    <button type=\"button\" className=\"small\" onClick={() => deleteHandler(order)}>Usuń</button>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                        </tbody>\r\n                    </table>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}