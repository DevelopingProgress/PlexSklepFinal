{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/kacpi/OneDrive/Pulpit/PlexSklepFinal/PlexSklepFinal/sklep/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/kacpi/OneDrive/Pulpit/PlexSklepFinal/PlexSklepFinal/sklep/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{USER_DELETE_REQUEST,USER_DETAILS_FAIL,USER_DETAILS_REQUEST,USER_DETAILS_SUCCESS,USER_REGISTER_FAIL,USER_REGISTER_REQUEST,USER_REGISTER_SUCCESS,USER_SIGNIN_FAIL,USER_SIGNIN_REQUEST,USER_SIGNIN_SUCCESS,USER_SIGNOUT,USER_UPDATE_PROFILE_FAIL,USER_UPDATE_PROFILE_REQUEST,USER_UPDATE_PROFILE_SUCCESS}from\"../constants/userConstants\";import axios from\"axios\";export var signin=function signin(email,password){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var _yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:USER_SIGNIN_REQUEST,payload:{email:email,password:password}});_context.prev=1;_context.next=4;return axios.post('/api/users/signin',{email:email,password:password});case 4:_yield$axios$post=_context.sent;data=_yield$axios$post.data;dispatch({type:USER_SIGNIN_SUCCESS,payload:data});localStorage.setItem('userInfo',JSON.stringify(data));_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);dispatch({type:USER_SIGNIN_FAIL,payload:_context.t0.response&&_context.t0.response.data.message?_context.t0.response.data.message:_context.t0.message});case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var signout=function signout(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:localStorage.removeItem('userInfo');localStorage.removeItem('cartItems');localStorage.removeItem('shippingAddress');dispatch({type:USER_SIGNOUT});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var register=function register(name,email,password){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var _yield$axios$post2,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch({type:USER_REGISTER_REQUEST,payload:{name:name,email:email,password:password}});_context3.prev=1;_context3.next=4;return axios.post('/api/users/register',{name:name,email:email,password:password});case 4:_yield$axios$post2=_context3.sent;data=_yield$axios$post2.data;dispatch({type:USER_REGISTER_SUCCESS,payload:data});dispatch({type:USER_SIGNIN_SUCCESS,payload:data});localStorage.setItem('userInfo',JSON.stringify(data));_context3.next=14;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](1);dispatch({type:USER_REGISTER_FAIL,payload:_context3.t0.response&&_context3.t0.response.data.message?_context3.t0.response.data.message:_context3.t0.message});case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[1,11]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var detailsUser=function detailsUser(userId){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var _getState,userInfo,_yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch({type:USER_DETAILS_REQUEST,payload:userId});_getState=getState(),userInfo=_getState.userSignin.userInfo;_context4.prev=2;_context4.next=5;return axios.get(\"/api/users/\".concat(userId),{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$axios$get=_context4.sent;data=_yield$axios$get.data;dispatch({type:USER_DETAILS_SUCCESS,payload:data});_context4.next=13;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](2);dispatch({type:USER_DETAILS_FAIL,payload:_context4.t0.response&&_context4.t0.response.data.message?_context4.t0.response.data.message:_context4.t0.message});case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[2,10]]);}));return function(_x4,_x5){return _ref4.apply(this,arguments);};}();};export var updateUserProfile=function updateUserProfile(user){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch,getState){var _getState2,userInfo,_yield$axios$put,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:dispatch({type:USER_UPDATE_PROFILE_REQUEST,payload:user});_getState2=getState(),userInfo=_getState2.userSignin.userInfo;_context5.prev=2;_context5.next=5;return axios.put(\"/api/users/profile\",user,{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$axios$put=_context5.sent;data=_yield$axios$put.data;dispatch({type:USER_UPDATE_PROFILE_SUCCESS,payload:data});dispatch({type:USER_SIGNIN_SUCCESS,payload:data});localStorage.setItem('userInfo',JSON.stringify(data));_context5.next=15;break;case 12:_context5.prev=12;_context5.t0=_context5[\"catch\"](2);dispatch({type:USER_UPDATE_PROFILE_FAIL,payload:_context5.t0.response&&_context5.t0.response.data.message?_context5.t0.response.data.message:_context5.t0.message});case 15:case\"end\":return _context5.stop();}}},_callee5,null,[[2,12]]);}));return function(_x6,_x7){return _ref5.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/kacpi/OneDrive/Pulpit/PlexSklepFinal/PlexSklepFinal/sklep/src/actions/userActions.js"],"names":["USER_DELETE_REQUEST","USER_DETAILS_FAIL","USER_DETAILS_REQUEST","USER_DETAILS_SUCCESS","USER_REGISTER_FAIL","USER_REGISTER_REQUEST","USER_REGISTER_SUCCESS","USER_SIGNIN_FAIL","USER_SIGNIN_REQUEST","USER_SIGNIN_SUCCESS","USER_SIGNOUT","USER_UPDATE_PROFILE_FAIL","USER_UPDATE_PROFILE_REQUEST","USER_UPDATE_PROFILE_SUCCESS","axios","signin","email","password","dispatch","type","payload","post","data","localStorage","setItem","JSON","stringify","response","message","signout","removeItem","register","name","detailsUser","userId","getState","userInfo","userSignin","get","headers","Authorization","token","updateUserProfile","user","put"],"mappings":"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","sourcesContent":["import {\r\n    USER_DELETE_REQUEST, USER_DETAILS_FAIL, USER_DETAILS_REQUEST, USER_DETAILS_SUCCESS,\r\n    USER_REGISTER_FAIL,\r\n    USER_REGISTER_REQUEST, USER_REGISTER_SUCCESS,\r\n    USER_SIGNIN_FAIL,\r\n    USER_SIGNIN_REQUEST,\r\n    USER_SIGNIN_SUCCESS,\r\n    USER_SIGNOUT, USER_UPDATE_PROFILE_FAIL, USER_UPDATE_PROFILE_REQUEST, USER_UPDATE_PROFILE_SUCCESS\r\n} from \"../constants/userConstants\";\r\nimport axios from \"axios\";\r\n\r\n\r\nexport const signin = (email, password) => async (dispatch) =>{\r\n    dispatch({type: USER_SIGNIN_REQUEST, payload: {email, password}});\r\n    try{\r\n        const {data} = await axios.post('/api/users/signin', {email, password});\r\n        dispatch({type: USER_SIGNIN_SUCCESS, payload: data});\r\n        localStorage.setItem('userInfo', JSON.stringify(data));\r\n    }catch (error) {\r\n      dispatch({type: USER_SIGNIN_FAIL, payload: error.response && error.response.data.message ?\r\n      error.response.data.message : error.message});\r\n    }\r\n};\r\n\r\nexport const signout = () => async (dispatch) => {\r\n    localStorage.removeItem('userInfo');\r\n    localStorage.removeItem('cartItems');\r\n    localStorage.removeItem('shippingAddress');\r\n    dispatch({type: USER_SIGNOUT});\r\n}\r\n\r\nexport const register = (name, email, password) => async (dispatch) =>{\r\n    dispatch({type: USER_REGISTER_REQUEST, payload: {name,email, password}});\r\n    try{\r\n        const {data} = await axios.post('/api/users/register', {name, email, password});\r\n        dispatch({type: USER_REGISTER_SUCCESS, payload: data});\r\n        dispatch({type: USER_SIGNIN_SUCCESS, payload: data});\r\n        localStorage.setItem('userInfo', JSON.stringify(data));\r\n    }catch (error) {\r\n        dispatch({type: USER_REGISTER_FAIL, payload: error.response && error.response.data.message ?\r\n                error.response.data.message : error.message});\r\n    }\r\n};\r\n\r\nexport const detailsUser = (userId) => async (dispatch, getState) => {\r\n    dispatch({type: USER_DETAILS_REQUEST, payload: userId});\r\n    const {userSignin: { userInfo },} = getState();\r\n    try{\r\n        const { data } = await axios.get(`/api/users/${userId}`, {\r\n            headers: {\r\n                Authorization: `Bearer ${userInfo.token}`,\r\n            },\r\n        });\r\n        dispatch({type: USER_DETAILS_SUCCESS, payload: data});\r\n    }catch (error) {\r\n        dispatch({type: USER_DETAILS_FAIL, payload: error.response && error.response.data.message ? error.response.data.message : error.message});\r\n    }\r\n};\r\n\r\nexport const updateUserProfile = (user) => async (dispatch, getState) => {\r\n  dispatch({type: USER_UPDATE_PROFILE_REQUEST, payload: user});\r\n  const {userSignin: { userInfo}} = getState();\r\n  try {\r\n    const {data} = await axios.put(`/api/users/profile`, user, {\r\n        headers: {\r\n            Authorization: `Bearer ${userInfo.token}`,\r\n        },\r\n    });\r\n      dispatch({type: USER_UPDATE_PROFILE_SUCCESS, payload: data});\r\n      dispatch({type: USER_SIGNIN_SUCCESS, payload: data});\r\n      localStorage.setItem('userInfo', JSON.stringify(data));\r\n  }catch (error) {\r\n      dispatch({type: USER_UPDATE_PROFILE_FAIL, payload: error.response && error.response.data.message ?\r\n              error.response.data.message : error.message});\r\n  }\r\n};"]},"metadata":{},"sourceType":"module"}