{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"C:/Users/kacpi/OneDrive/Pulpit/PlexSklepFinal/PlexSklepFinal/sklep/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/kacpi/OneDrive/Pulpit/PlexSklepFinal/PlexSklepFinal/sklep/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/kacpi/OneDrive/Pulpit/PlexSklepFinal/PlexSklepFinal/sklep/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{useEffect}from\"react\";import{detailsProduct,updateProduct}from\"../actions/productActions\";import LoadingBoxWhite from\"../components/LoadingBoxWhite\";import MessageBox from\"../components/MessageBox\";import{SecondaryNavbar}from\"../components/Navbar/secondaryNavbar\";import{Icon}from\"../components/Login/LoginElements\";import{FaArrowLeft}from\"react-icons/all\";import{PRODUCT_UPDATE_RESET}from\"../constants/productConstants\";import axios from\"axios\";export default function ProductEditPage(props){var productId=props.match.params.id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),price=_useState4[0],setPrice=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),category=_useState8[0],setCategory=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),countInStock=_useState10[0],setCountInStock=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),brand=_useState12[0],setBrand=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),thumbnail=_useState14[0],setThumbnail=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),description=_useState16[0],setDescription=_useState16[1];var dispatch=useDispatch();var productDetails=useSelector(function(state){return state.productDetails;});var loading=productDetails.loading,error=productDetails.error,product=productDetails.product;var productUpdate=useSelector(function(state){return state.productUpdate;});var loadingUpdate=productUpdate.loading,errorUpdate=productUpdate.error,successUpdate=productUpdate.success;useEffect(function(){if(successUpdate){dispatch({type:PRODUCT_UPDATE_RESET});props.history.push('/productlist');}if(!product||product._id!==productId){dispatch(detailsProduct(productId));}else{setName(product.name);setImage(product.image);setPrice(product.price);setBrand(product.brand);setCategory(product.category);setCountInStock(product.countInStock);setThumbnail(product.thumbnail);setDescription(product.description);}},[product,dispatch,productId,successUpdate]);var submitHandler=function submitHandler(e){e.preventDefault();dispatch(updateProduct({_id:productId,name:name,image:image,price:price,brand:brand,category:category,countInStock:countInStock,thumbnail:thumbnail,description:description}));};var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),loadingUpload=_useState18[0],setLoadingUpload=_useState18[1];var _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),errorUpload=_useState20[0],setErrorUpload=_useState20[1];var userSignin=useSelector(function(state){return state.userSignin;});var userInfo=userSignin.userInfo;var uploadFileHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var file,bodyFormData,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:file=e.target.files[0];bodyFormData=new FormData();bodyFormData.append('image',file);setLoadingUpload(true);_context.prev=4;_context.next=7;return axios.post('/api/uploads',bodyFormData,{headers:{'Content-Type':'multipart/form-data',Authorization:\"Bearer \".concat(userInfo.token)}});case 7:_yield$axios$post=_context.sent;data=_yield$axios$post.data;setImage(data);setLoadingUpload(false);_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](4);setErrorUpload(_context.t0.message);setLoadingUpload(false);case 17:case\"end\":return _context.stop();}}},_callee,null,[[4,13]]);}));return function uploadFileHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"grid-container\",children:[/*#__PURE__*/_jsx(SecondaryNavbar,{}),/*#__PURE__*/_jsx(Icon,{to:\"/productlist\",children:/*#__PURE__*/_jsx(FaArrowLeft,{})}),/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h1\",{children:[\"Edytuj Produkt \",productId]})}),loadingUpdate&&/*#__PURE__*/_jsx(LoadingBoxWhite,{}),errorUpdate&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorUpdate}),loading?/*#__PURE__*/_jsx(LoadingBoxWhite,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",className:\"whitened\",children:\"Nazwa\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",placeholder:\"Wprowad\\u017A Nazw\\u0119 Przedmiotu\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image\",className:\"whitened\",children:\"Zdj\\u0119cie\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"image\",placeholder:\"Wprowad\\u017A Zdj\\u0119cie Przedmiotu\",value:image,onChange:function onChange(e){return setImage(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"imageFile\",className:\"whitened\",children:\"Plik Ze Zdj\\u0119ciem\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"imageFile\",style:{color:'white'},\"aria-label\":\"Wybierz Zdj\\u0119cie\",onChange:uploadFileHandler}),loadingUpload&&/*#__PURE__*/_jsx(LoadingBoxWhite,{}),errorUpload&&/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:errorUpload})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price\",className:\"whitened\",children:\"Cena\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"price\",placeholder:\"Wprowad\\u017A Cen\\u0119 Przedmiotu\",value:price,onChange:function onChange(e){return setPrice(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"brand\",className:\"whitened\",children:\"Marka\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"brand\",placeholder:\"Wprowad\\u017A Mark\\u0119 Przedmiotu\",value:brand,onChange:function onChange(e){return setBrand(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category\",className:\"whitened\",children:\"Kategoria\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"category\",placeholder:\"Wprowad\\u017A Kategori\\u0119 Przedmiotu\",value:category,onChange:function onChange(e){return setCategory(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"countInStock\",className:\"whitened\",children:\"Ilo\\u015B\\u0107\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"countInStock\",placeholder:\"Wprowad\\u017A Ilo\\u015B\\u0107 Przedmiot\\xF3w\",value:countInStock,onChange:function onChange(e){return setCountInStock(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"thumbnail\",className:\"whitened\",children:\"Opis Na Stronie G\\u0142\\xF3wnej\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",maxLength:\"75\",id:\"thumbnail\",placeholder:\"Wprowad\\u017A Opis Przedmiotu Na Stronie G\\u0142\\xF3wnej\",value:thumbnail,onChange:function onChange(e){return setThumbnail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",className:\"whitened\",children:\"Opis\"}),/*#__PURE__*/_jsx(\"textarea\",{rows:\"20\",id:\"description\",placeholder:\"Wprowad\\u017A Opis Przedmiotu\",value:description,onChange:function onChange(e){return setDescription(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"primary hoverwhite whitened\",type:\"submit\",children:\"Zaktualizuj\"})]})]})]})]});}","map":{"version":3,"sources":["C:/Users/kacpi/OneDrive/Pulpit/PlexSklepFinal/PlexSklepFinal/sklep/src/pages/edit.js"],"names":["React","useState","useDispatch","useSelector","useEffect","detailsProduct","updateProduct","LoadingBoxWhite","MessageBox","SecondaryNavbar","Icon","FaArrowLeft","PRODUCT_UPDATE_RESET","axios","ProductEditPage","props","productId","match","params","id","name","setName","price","setPrice","image","setImage","category","setCategory","countInStock","setCountInStock","brand","setBrand","thumbnail","setThumbnail","description","setDescription","dispatch","productDetails","state","loading","error","product","productUpdate","loadingUpdate","errorUpdate","successUpdate","success","type","history","push","_id","submitHandler","e","preventDefault","loadingUpload","setLoadingUpload","errorUpload","setErrorUpload","userSignin","userInfo","uploadFileHandler","file","target","files","bodyFormData","FormData","append","post","headers","Authorization","token","data","message","value","color"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {useState} from \"react\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {useEffect} from \"react\";\r\nimport {detailsProduct, updateProduct} from \"../actions/productActions\";\r\nimport LoadingBoxWhite from \"../components/LoadingBoxWhite\";\r\nimport MessageBox from \"../components/MessageBox\";\r\nimport {SecondaryNavbar} from \"../components/Navbar/secondaryNavbar\";\r\nimport {Icon} from \"../components/Login/LoginElements\";\r\nimport {FaArrowLeft} from \"react-icons/all\";\r\nimport {PRODUCT_UPDATE_RESET} from \"../constants/productConstants\";\r\nimport axios from \"axios\";\r\n\r\nexport default function ProductEditPage(props){\r\n    const productId = props.match.params.id;\r\n    const [name, setName] = useState('');\r\n    const [price, setPrice] = useState('');\r\n    const [image, setImage] = useState('');\r\n    const [category, setCategory] = useState('');\r\n    const [countInStock, setCountInStock] = useState('');\r\n    const [brand, setBrand] = useState('');\r\n    const [thumbnail, setThumbnail] = useState('');\r\n    const [description, setDescription] = useState('');\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const productDetails = useSelector(state => state.productDetails);\r\n    const { loading, error, product} = productDetails;\r\n    const productUpdate = useSelector(state => state.productUpdate);\r\n    const {loading: loadingUpdate, error: errorUpdate, success: successUpdate} = productUpdate;\r\n\r\n    useEffect(() => {\r\n        if(successUpdate){\r\n            dispatch({type: PRODUCT_UPDATE_RESET});\r\n            props.history.push('/productlist');\r\n        }\r\n        if(!product || (product._id !== productId)){\r\n            dispatch(detailsProduct(productId));\r\n        }else {\r\n            setName(product.name);\r\n            setImage(product.image);\r\n            setPrice(product.price);\r\n            setBrand(product.brand);\r\n            setCategory(product.category);\r\n            setCountInStock(product.countInStock);\r\n            setThumbnail(product.thumbnail);\r\n            setDescription(product.description);\r\n        }\r\n\r\n    }, [product, dispatch, productId, successUpdate]);\r\n\r\n    const submitHandler = (e) => {\r\n        e.preventDefault();\r\n        dispatch(updateProduct({_id: productId, name, image, price, brand, category, countInStock, thumbnail, description}));\r\n    }\r\n\r\n    const [loadingUpload, setLoadingUpload] = useState(false);\r\n    const [errorUpload, setErrorUpload] = useState('');\r\n    const userSignin = useSelector(state => state.userSignin);\r\n    const {userInfo} = userSignin;\r\n\r\n    const uploadFileHandler = async (e) => {\r\n        const file = e.target.files[0];\r\n        const bodyFormData = new FormData();\r\n        bodyFormData.append('image', file);\r\n        setLoadingUpload(true);\r\n        try {\r\n            const {data} = await axios.post('/api/uploads', bodyFormData, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data',\r\n                    Authorization: `Bearer ${userInfo.token}`\r\n                }\r\n            });\r\n            setImage(data);\r\n            setLoadingUpload(false);\r\n        } catch (error) {\r\n            setErrorUpload(error.message);\r\n            setLoadingUpload(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"grid-container\">\r\n            <SecondaryNavbar/>\r\n            <Icon to=\"/productlist\"><FaArrowLeft/></Icon>\r\n            <form className=\"form\" onSubmit={submitHandler}>\r\n                <div>\r\n                    <h1>Edytuj Produkt {productId}</h1>\r\n                </div>\r\n                {loadingUpdate && <LoadingBoxWhite/>}\r\n                {errorUpdate && <MessageBox variant=\"danger\">{errorUpdate}</MessageBox>}\r\n                {loading ? <LoadingBoxWhite/>:\r\n                error ? <MessageBox variant=\"danger\">{error}</MessageBox>:(\r\n                    <>\r\n                        <div>\r\n                            <label htmlFor=\"name\" className=\"whitened\">Nazwa</label>\r\n                            <input type=\"text\" id=\"name\" placeholder=\"Wprowadź Nazwę Przedmiotu\" value={name}\r\n                            onChange={(e) => setName(e.target.value)}/>\r\n                        </div>\r\n                        <div>\r\n                            <label htmlFor=\"image\" className=\"whitened\">Zdjęcie</label>\r\n                            <input type=\"text\" id=\"image\" placeholder=\"Wprowadź Zdjęcie Przedmiotu\" value={image}\r\n                                   onChange={(e) => setImage(e.target.value)}/>\r\n                        </div>\r\n                        <div>\r\n                            <label htmlFor=\"imageFile\" className=\"whitened\">Plik Ze Zdjęciem</label>\r\n                            <input type=\"file\"  id=\"imageFile\" style={{color: 'white'}} aria-label=\"Wybierz Zdjęcie\" onChange={uploadFileHandler}/>\r\n                            {loadingUpload && <LoadingBoxWhite/>}\r\n                            {errorUpload && <MessageBox variant=\"danger\">{errorUpload}</MessageBox>}\r\n                        </div>\r\n                        <div>\r\n                            <label htmlFor=\"price\" className=\"whitened\">Cena</label>\r\n                            <input type=\"text\" id=\"price\" placeholder=\"Wprowadź Cenę Przedmiotu\" value={price}\r\n                                   onChange={(e) => setPrice(e.target.value)}/>\r\n                        </div>\r\n                        <div>\r\n                            <label htmlFor=\"brand\" className=\"whitened\">Marka</label>\r\n                            <input type=\"text\" id=\"brand\" placeholder=\"Wprowadź Markę Przedmiotu\" value={brand}\r\n                                   onChange={(e) => setBrand(e.target.value)}/>\r\n                        </div>\r\n                        <div>\r\n                            <label htmlFor=\"category\" className=\"whitened\">Kategoria</label>\r\n                            <input type=\"text\" id=\"category\" placeholder=\"Wprowadź Kategorię Przedmiotu\" value={category}\r\n                                   onChange={(e) => setCategory(e.target.value)}/>\r\n                        </div>\r\n                        <div>\r\n                            <label htmlFor=\"countInStock\" className=\"whitened\">Ilość</label>\r\n                            <input type=\"text\" id=\"countInStock\" placeholder=\"Wprowadź Ilość Przedmiotów\" value={countInStock}\r\n                                   onChange={(e) => setCountInStock(e.target.value)}/>\r\n                        </div>\r\n                        <div>\r\n                            <label htmlFor=\"thumbnail\" className=\"whitened\">Opis Na Stronie Głównej</label>\r\n                            <input type=\"text\" maxLength='75' id=\"thumbnail\" placeholder=\"Wprowadź Opis Przedmiotu Na Stronie Głównej\" value={thumbnail}\r\n                                      onChange={(e) => setThumbnail(e.target.value)}/>\r\n                        </div>\r\n                        <div>\r\n                            <label htmlFor=\"description\" className=\"whitened\">Opis</label>\r\n                            <textarea rows=\"20\" id=\"description\" placeholder=\"Wprowadź Opis Przedmiotu\" value={description}\r\n                                   onChange={(e) => setDescription(e.target.value)}/>\r\n                        </div>\r\n                        <div>\r\n                            <label/>\r\n                            <button className=\"primary hoverwhite whitened\" type=\"submit\">\r\n                                Zaktualizuj\r\n                            </button>\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </form>\r\n        </div>\r\n    );\r\n\r\n}"]},"metadata":{},"sourceType":"module"}