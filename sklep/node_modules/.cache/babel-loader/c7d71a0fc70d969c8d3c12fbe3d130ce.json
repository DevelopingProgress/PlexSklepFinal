{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/kacpi/OneDrive/Pulpit/PlexSklepFinal/PlexSklepFinal/sklep/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/kacpi/OneDrive/Pulpit/PlexSklepFinal/PlexSklepFinal/sklep/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{MY_ORDERS_FAIL,MY_ORDERS_REQUEST,MY_ORDERS_SUCCESS,ORDER_CREATE_FAIL,ORDER_CREATE_REQUEST,ORDER_CREATE_SUCCESS,ORDER_DELETE_FAIL,ORDER_DELETE_REQUEST,ORDER_DELETE_SUCCESS,ORDER_DELIVER_FAIL,ORDER_DELIVER_REQUEST,ORDER_DELIVER_SUCCESS,ORDER_DETAILS_FAIL,ORDER_DETAILS_REQUEST,ORDER_DETAILS_SUCCESS,ORDER_LIST_FAIL,ORDER_LIST_REQUEST,ORDER_LIST_SUCCESS,ORDER_PAY_FAIL,ORDER_PAY_REQUEST,ORDER_PAY_SUCCESS}from\"../constants/orderConstants\";import axios from\"axios\";import{CART_EMPTY}from\"../constants/cartConstants\";export var createOrder=function createOrder(order){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){var _getState,userInfo,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:ORDER_CREATE_REQUEST,payload:order});_context.prev=1;_getState=getState(),userInfo=_getState.userSignin.userInfo;_context.next=5;return axios.post('/api/orders',order,{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$axios$post=_context.sent;data=_yield$axios$post.data;dispatch({type:ORDER_CREATE_SUCCESS,payload:data.order});dispatch({type:CART_EMPTY});localStorage.removeItem('cartItems');_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);dispatch({type:ORDER_CREATE_FAIL,payload:_context.t0.response&&_context.t0.response.data.message?_context.t0.response.data.message:_context.t0.message});case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};export var detailsOrder=function detailsOrder(orderId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var _getState2,userInfo,_yield$axios$get,data,message;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:ORDER_DETAILS_REQUEST,payload:orderId});_getState2=getState(),userInfo=_getState2.userSignin.userInfo;_context2.prev=2;_context2.next=5;return axios.get(\"/api/orders/\".concat(orderId),{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$axios$get=_context2.sent;data=_yield$axios$get.data;dispatch({type:ORDER_DETAILS_SUCCESS,payload:data});_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](2);message=_context2.t0.response&&_context2.t0.response.data.message?_context2.t0.response.data.message:_context2.t0.message;dispatch({type:ORDER_DETAILS_FAIL,payload:message});case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[2,10]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}();};export var payOrder=function payOrder(order,paymentResult){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var _getState3,userInfo,_axios$put,data,message;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch({type:ORDER_PAY_REQUEST,payload:{order:order,paymentResult:paymentResult}});_getState3=getState(),userInfo=_getState3.userSignin.userInfo;try{_axios$put=axios.put(\"/api/orders/\".concat(order._id,\"/pay\"),paymentResult,{headers:{Authorization:\"Bearer \".concat(userInfo.token)}}),data=_axios$put.data;dispatch({type:ORDER_PAY_SUCCESS,payload:data});}catch(error){message=error.response&&error.response.data.message?error.response.data.message:error.message;dispatch({type:ORDER_PAY_FAIL,payload:message});}case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}();};export var listMyOrders=function listMyOrders(){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var _getState4,userInfo,_yield$axios$get2,data,message;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch({type:MY_ORDERS_REQUEST});_getState4=getState(),userInfo=_getState4.userSignin.userInfo;_context4.prev=2;_context4.next=5;return axios.get('/api/orders/my',{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$axios$get2=_context4.sent;data=_yield$axios$get2.data;dispatch({type:MY_ORDERS_SUCCESS,payload:data});_context4.next=14;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](2);message=_context4.t0.response&&_context4.t0.response.data.message?_context4.t0.response.data.message:_context4.t0.message;dispatch({type:MY_ORDERS_FAIL,payload:message});case 14:case\"end\":return _context4.stop();}}},_callee4,null,[[2,10]]);}));return function(_x7,_x8){return _ref4.apply(this,arguments);};}();};export var listOrders=function listOrders(){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch,getState){var _getState5,userInfo,_yield$axios$get3,data,message;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:dispatch({type:ORDER_LIST_REQUEST});_getState5=getState(),userInfo=_getState5.userSignin.userInfo;_context5.prev=2;_context5.next=5;return axios.get('/api/orders',{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$axios$get3=_context5.sent;data=_yield$axios$get3.data;dispatch({type:ORDER_LIST_SUCCESS,payload:data});_context5.next=14;break;case 10:_context5.prev=10;_context5.t0=_context5[\"catch\"](2);message=_context5.t0.response&&_context5.t0.response.data.message?_context5.t0.response.data.message:_context5.t0.message;dispatch({type:ORDER_LIST_FAIL,payload:message});case 14:case\"end\":return _context5.stop();}}},_callee5,null,[[2,10]]);}));return function(_x9,_x10){return _ref5.apply(this,arguments);};}();};export var orderDelete=function orderDelete(orderId){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch,getState){var _getState6,userInfo,_yield$axios$delete,data,message;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:dispatch({type:ORDER_DELETE_REQUEST,payload:orderId});_getState6=getState(),userInfo=_getState6.userSignin.userInfo;_context6.prev=2;_context6.next=5;return axios.delete(\"/api/orders/\".concat(orderId),{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:_yield$axios$delete=_context6.sent;data=_yield$axios$delete.data;dispatch({type:ORDER_DELETE_SUCCESS,payload:data});_context6.next=14;break;case 10:_context6.prev=10;_context6.t0=_context6[\"catch\"](2);message=_context6.t0.response&&_context6.t0.response.data.message?_context6.t0.response.data.message:_context6.t0.message;dispatch({type:ORDER_DELETE_FAIL,payload:message});case 14:case\"end\":return _context6.stop();}}},_callee6,null,[[2,10]]);}));return function(_x11,_x12){return _ref6.apply(this,arguments);};}();};export var deliverOrder=function deliverOrder(orderId){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch,getState){var _getState7,userInfo,_axios$put2,data,message;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:dispatch({type:ORDER_DELIVER_REQUEST,payload:{orderId:orderId}});_getState7=getState(),userInfo=_getState7.userSignin.userInfo;try{_axios$put2=axios.put(\"/api/orders/\".concat(orderId,\"/deliver\"),{},{headers:{Authorization:\"Bearer \".concat(userInfo.token)}}),data=_axios$put2.data;dispatch({type:ORDER_DELIVER_SUCCESS,payload:data});}catch(error){message=error.response&&error.response.data.message?error.response.data.message:error.message;dispatch({type:ORDER_DELIVER_FAIL,payload:message});}case 3:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x13,_x14){return _ref7.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/kacpi/OneDrive/Pulpit/PlexSklepFinal/PlexSklepFinal/sklep/src/actions/orderActions.js"],"names":["MY_ORDERS_FAIL","MY_ORDERS_REQUEST","MY_ORDERS_SUCCESS","ORDER_CREATE_FAIL","ORDER_CREATE_REQUEST","ORDER_CREATE_SUCCESS","ORDER_DELETE_FAIL","ORDER_DELETE_REQUEST","ORDER_DELETE_SUCCESS","ORDER_DELIVER_FAIL","ORDER_DELIVER_REQUEST","ORDER_DELIVER_SUCCESS","ORDER_DETAILS_FAIL","ORDER_DETAILS_REQUEST","ORDER_DETAILS_SUCCESS","ORDER_LIST_FAIL","ORDER_LIST_REQUEST","ORDER_LIST_SUCCESS","ORDER_PAY_FAIL","ORDER_PAY_REQUEST","ORDER_PAY_SUCCESS","axios","CART_EMPTY","createOrder","order","dispatch","getState","type","payload","userInfo","userSignin","post","headers","Authorization","token","data","localStorage","removeItem","response","message","detailsOrder","orderId","get","payOrder","paymentResult","put","_id","error","listMyOrders","listOrders","orderDelete","delete","deliverOrder"],"mappings":"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","sourcesContent":["import {\r\n    MY_ORDERS_FAIL,\r\n    MY_ORDERS_REQUEST,\r\n    MY_ORDERS_SUCCESS,\r\n    ORDER_CREATE_FAIL,\r\n    ORDER_CREATE_REQUEST,\r\n    ORDER_CREATE_SUCCESS,\r\n    ORDER_DELETE_FAIL,\r\n    ORDER_DELETE_REQUEST,\r\n    ORDER_DELETE_SUCCESS, ORDER_DELIVER_FAIL,\r\n    ORDER_DELIVER_REQUEST,\r\n    ORDER_DELIVER_SUCCESS,\r\n    ORDER_DETAILS_FAIL,\r\n    ORDER_DETAILS_REQUEST,\r\n    ORDER_DETAILS_SUCCESS,\r\n    ORDER_LIST_FAIL,\r\n    ORDER_LIST_REQUEST,\r\n    ORDER_LIST_SUCCESS,\r\n    ORDER_PAY_FAIL,\r\n    ORDER_PAY_REQUEST,\r\n    ORDER_PAY_SUCCESS\r\n} from \"../constants/orderConstants\";\r\nimport axios from \"axios\";\r\nimport {CART_EMPTY} from \"../constants/cartConstants\";\r\n\r\n\r\nexport const createOrder = (order) => async (dispatch, getState) => {\r\n    dispatch({ type: ORDER_CREATE_REQUEST, payload: order });\r\n    try {\r\n        const {\r\n            userSignin: { userInfo },\r\n        } = getState();\r\n        const { data } = await axios.post('/api/orders', order, {\r\n            headers: {\r\n                Authorization: `Bearer ${userInfo.token}`,\r\n            },\r\n        });\r\n        dispatch({ type: ORDER_CREATE_SUCCESS, payload: data.order });\r\n        dispatch({ type: CART_EMPTY });\r\n        localStorage.removeItem('cartItems');\r\n    } catch (error) {\r\n        dispatch({ type: ORDER_CREATE_FAIL, payload: error.response && error.response.data.message ? error.response.data.message : error.message,});\r\n    }\r\n};\r\n\r\nexport const detailsOrder = (orderId) => async (dispatch, getState) => {\r\n    dispatch({ type: ORDER_DETAILS_REQUEST, payload: orderId });\r\n    const { userSignin: { userInfo } } = getState();\r\n    try {\r\n        const { data } = await axios.get(`/api/orders/${orderId}`, {\r\n            headers: { Authorization: `Bearer ${userInfo.token}` },\r\n        });\r\n        dispatch({ type: ORDER_DETAILS_SUCCESS, payload: data });\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message ? error.response.data.message : error.message;\r\n        dispatch({ type: ORDER_DETAILS_FAIL, payload: message });\r\n    }\r\n};\r\n\r\nexport const payOrder = (order, paymentResult) => async (dispatch, getState) => {\r\n    dispatch({ type: ORDER_PAY_REQUEST, payload: { order, paymentResult } });\r\n    const {userSignin: { userInfo },} = getState();\r\n    try {\r\n        const { data } = axios.put(`/api/orders/${order._id}/pay`, paymentResult, {\r\n            headers: { Authorization: `Bearer ${userInfo.token}` },\r\n        });\r\n        dispatch({ type: ORDER_PAY_SUCCESS, payload: data });\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message ? error.response.data.message : error.message;\r\n        dispatch({ type: ORDER_PAY_FAIL, payload: message });\r\n    }\r\n};\r\n\r\n\r\nexport const listMyOrders = () => async (dispatch, getState) => {\r\n    dispatch({ type: MY_ORDERS_REQUEST });\r\n    const {userSignin: { userInfo },} = getState();\r\n    try {\r\n        const { data } = await axios.get('/api/orders/my', {\r\n            headers: {\r\n                Authorization: `Bearer ${userInfo.token}`,\r\n            },\r\n        });\r\n        dispatch({ type: MY_ORDERS_SUCCESS, payload: data });\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message ? error.response.data.message : error.message;\r\n        dispatch({ type: MY_ORDERS_FAIL, payload: message });\r\n    }\r\n};\r\n\r\nexport const listOrders = () => async (dispatch, getState) =>{\r\n    dispatch({ type: ORDER_LIST_REQUEST });\r\n    const {userSignin: { userInfo },} = getState();\r\n    try {\r\n        const { data } = await axios.get('/api/orders', {\r\n            headers: {\r\n                Authorization: `Bearer ${userInfo.token}`,\r\n            },\r\n        });\r\n        dispatch({ type: ORDER_LIST_SUCCESS, payload: data });\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message ? error.response.data.message : error.message;\r\n        dispatch({ type: ORDER_LIST_FAIL, payload: message });\r\n    }\r\n}\r\n\r\nexport const orderDelete = (orderId) => async (dispatch, getState) => {\r\n    dispatch({type: ORDER_DELETE_REQUEST, payload: orderId});\r\n    const {userSignin: { userInfo },} = getState();\r\n    try {\r\n        const { data } = await axios.delete(`/api/orders/${orderId}`, {\r\n            headers: {\r\n                Authorization: `Bearer ${userInfo.token}`,\r\n            },\r\n        });\r\n        dispatch({ type: ORDER_DELETE_SUCCESS, payload: data });\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message ? error.response.data.message : error.message;\r\n        dispatch({ type: ORDER_DELETE_FAIL, payload: message });\r\n    }\r\n}\r\n\r\nexport const deliverOrder = (orderId) => async (dispatch, getState) => {\r\n    dispatch({ type: ORDER_DELIVER_REQUEST, payload: { orderId } });\r\n    const {userSignin: { userInfo },} = getState();\r\n    try {\r\n        const { data } = axios.put(`/api/orders/${orderId}/deliver`, {}, {\r\n            headers: { Authorization: `Bearer ${userInfo.token}` },\r\n        });\r\n        dispatch({ type: ORDER_DELIVER_SUCCESS, payload: data });\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message ? error.response.data.message : error.message;\r\n        dispatch({ type: ORDER_DELIVER_FAIL, payload: message });\r\n    }\r\n};"]},"metadata":{},"sourceType":"module"}